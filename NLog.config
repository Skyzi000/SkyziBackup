<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      throwExceptions="false"
      internalLogLevel="Off" internalLogFile="c:\temp\nlog-internal.log">

  <variable name="appname" value="SkyziBackup" />

  <targets>
    
    <target name="logDebugger" xsi:type="Debugger" layout="${level:uppercase=true}|${logger}|${message}" />

    <target name="logConsole" xsi:type="Console" />
    
    <target name="logFile" xsi:type="File"
      layout="${longdate}|${level:uppercase=true}|${message}${exception:format=ToString}"
      header="${var:appname} ${assembly-version} LogFile"
      fileName="${gdc:item=AppDataPath:whenEmpty=${specialfolder:folder=CommonApplicationData:cached=true}/Skyzi000/${var:appname}}/Logs/${shortdate}.log"
      maxArchiveFiles="10"
      archiveAboveSize="1073741824"
      keepFileOpen="true"
      autoFlush="False"
      openFileFlushTimeout="2" />
    
    <target name="logErrorFile" xsi:type="File"
      layout="${longdate}|${level:uppercase=true}|${logger}|${message}${exception:format=ToString}"
      header="${var:appname} ${assembly-version} ErrorLogFile"
      fileName="${gdc:item=AppDataPath:whenEmpty=${specialfolder:folder=CommonApplicationData:cached=true}/Skyzi000/${var:appname}}/Logs/Error_${shortdate}.log"
      maxArchiveFiles="10"
      archiveAboveSize="1073741824" />
    
  </targets>

  <rules>
    <logger name="*" minlevel="Trace" writeTo="logDebugger" />
    <logger name="*" minlevel="Info" writeTo="logConsole" />
    <logger name="*" minlevel="Info" writeTo="logFile" />
    <logger name="*" minlevel="Error" writeTo="logErrorFile" />
  </rules>
</nlog>